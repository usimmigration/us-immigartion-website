generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Application {
  id String @id @default(cuid())

  email       String
  paymentLink String?

  paymentStatus PAYMENT_STATUS @default(UNPAID)

  ApplicationData ApplicationData?

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model ApplicationData {
  id String @id @default(cuid())

  application   Application @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  applicationId String      @unique

  email        String
  confirmEmail String
  altEmail     String?

  phoneType   String
  phonePrefix String
  phoneNumber String

  lastName   String
  givenNames String

  aliases YesNo

  dobDay   String
  dobMonth String
  dobYear  String

  birthCity    String
  birthCountry String

  parent1LastName  String
  parent1FirstName String

  parent2LastName  String
  parent2FirstName String

  passportCountry String

  passportIssuedDay   String
  passportIssuedMonth String
  passportIssuedYear  String

  passportExpiryDay   String
  passportExpiryMonth String
  passportExpiryYear  String

  passportNumber     String
  citizenshipCountry String

  gender Gender

  passportFile String? // base64

  otherCitizenship    YesNo
  otherPassportIssued YesNo

  homeCountry   String
  streetAddress String
  addressLine2  String?

  city    String
  zipCode String

  billingSame         YesNo
  socialMediaDisclose YesNo
  currentEmployer     YesNo

  travelItinerary TravelItinerary

  questionA YesNo
  questionB YesNo
  questionC YesNo
  questionD YesNo
  questionE YesNo
  questionF YesNo
  questionG YesNo
  questionH YesNo
  questionI YesNo
  questionJ YesNo

  emergencyLastName    String
  emergencyFirstName   String
  emergencyPhonePrefix String
  emergencyPhoneNumber String
  emergencyEmail       String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

enum PAYMENT_STATUS {
  PAID
  UNPAID
}

enum YesNo {
  Yes
  No
}

enum Gender {
  Male
  Female
  Other
}

enum TravelItinerary {
  transit
  stay
}
